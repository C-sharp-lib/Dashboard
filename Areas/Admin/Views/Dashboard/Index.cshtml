@using Dash.Areas.Identity.Models
@using Dash.Areas.Admin.Models
@using Microsoft.EntityFrameworkCore.Metadata.Internal
@model Dash.Areas.Admin.Models.IndexViewModel
@{
    Layout = "_Layout";
    AppUser activeUser = ViewBag.user;
}

<div class="row mt-11 mb-3" xmlns="">
    <div class="col-12 col-md-12 col-lg-7">
        @*<div class="card shadow-lg bg-gradient-dark">
            <div class="card-header bg-gradient-dark">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active ubuntu-bold text-gradient text-warning bg-gradient-dark tab-styles" id="users-tab" data-bs-toggle="tab" data-bs-target="#users-tab-pane" type="button" role="tab" aria-controls="users-tab-pane" aria-selected="true">Users</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link ubuntu-bold text-gradient text-warning bg-gradient-dark tab-styles" id="events-tab" data-bs-toggle="tab" data-bs-target="#events-tab-pane" type="button" role="tab" aria-controls="events-tab-pane" aria-selected="false">Events</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link ubuntu-bold text-gradient text-warning bg-gradient-dark tab-styles" id="products-tab" data-bs-toggle="tab" data-bs-target="#products-tab-pane" type="button" role="tab" aria-controls="products-tab-pane" aria-selected="false">Products</button>
                    </li>
                </ul>
            </div>
            <div class="card-body p-4">
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="users-tab-pane" role="tabpanel" aria-labelledby="users-tab" tabindex="0">
                        @await Html.PartialAsync("_Partials/_users-list", Model.Users)
                    </div>
                    <div class="tab-pane fade" id="events-tab-pane" role="tabpanel" aria-labelledby="events-tab" tabindex="0">
                        @await Html.PartialAsync("_Partials/_events-list", Model.Events)
                    </div>
                    <div class="tab-pane fade" id="products-tab-pane" role="tabpanel" aria-labelledby="products-tab" tabindex="0">
                        @await Html.PartialAsync("_Partials/_products-list", Model.Products)
                    </div>
                </div>
            </div>
        </div>*@
    </div>
    <div class="col-12 col-md-12 col-lg-5">
        <div class="row mt-2 mb-2">
            <div class="col-12 col-md-6 mt-1">

                <div class="card card-stats bg-gradient-dark shadow-lg">
                    <div class="card-header bg-gradient-dark card-header-icon p-1">
                        <div class="card-icon bg-gradient-info">
                            <i class="fa-solid fa-users-rectangle text-white"></i>
                        </div>
                        <p class="card-category text-white me-3 ubuntu-bold">Users</p>
                        <h3 class="card-title text-gradient text-info me-3 ubuntu-bold">
                            <small>@Model.UserCount</small>
                        </h3>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <!--            <i class="fa-solid fa-circle-exclamation text-gradient text-danger"></i>-->
                            <!--            <a href="#">Get More Space...</a>-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6 mt-1">
                <div class="card card-stats bg-gradient-dark shadow-lg">
                    <div class="card-header bg-gradient-dark card-header-icon p-1">
                        <div class="card-icon bg-gradient-success">
                            <i class="fa-solid fa-bag-shopping text-white"></i>
                        </div>
                        <p class="card-category text-white me-3 ubuntu-bold">Products</p>
                        <h3 class="card-title text-gradient text-success me-3 ubuntu-bold">@Model.ProductCount</h3>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <!--            <i class="fa-regular fa-calendar-days text-gradient text-primary"></i> Last 24 Hours-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-12 col-md-6 mt-1">
                <div class="card card-stats bg-gradient-dark shadow-lg">
                    <div class="card-header bg-gradient-dark card-header-icon p-1">
                        <div class="card-icon bg-gradient-warning">
                            <i class="fa-solid fa-briefcase text-white"></i>
                        </div>
                        <p class="card-category text-white me-3 ubuntu-bold">Events</p>
                        <h3 class="card-title text-gradient text-primary me-3 ubuntu-bold">@Model.EventCount</h3>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <!--            <i class="fa-solid fa-location-dot text-gradient text-success"></i> Tracked from Github-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6 mt-1">
                <div class="card card-stats bg-gradient-dark shadow-lg">
                    <div class="card-header bg-gradient-dark card-header-icon p-1">
                        <div class="card-icon bg-gradient-danger">
                            <i class="fa-solid fa-person text-white"></i>
                        </div>
                        <p class="card-category text-white me-3 ubuntu-bold">Customers</p>
                        <h3 class="card-title me-3 text-gradient text-danger ubuntu-bold">@Model.CustomerCount</h3>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <!--            <i class="fa-regular fa-pen-to-square text-gradient text-info"></i> Just Updated-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-3 mb-11">
    <div class="col-12 col-md-12 col-lg-5">
        <div class="card shadow-lg bg-gradient-dark z-index-2">
            <div class="card-header p-3 pb-0 bg-gradient-dark">
                <h6 class="text-gradient text-info ubuntu-bold">Company Analytics</h6>
            </div>
            <div class="card-body p-3">
                <div class="chart">
                    <canvas id="line-chart-gradient" class="chart-canvas" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-12 col-lg-7">
        <div class="card shadow-lg bg-gradient-dark z-index-2">
            <div class="card-header p-3 pb-0 bg-gradient-dark">
                <h6 class="text-gradient text-info ubuntu-bold">Company Unit Numbers</h6>
            </div>
            <div class="card-body p-3">
                <div class="chart">
                    <canvas id="bar-chart" class="chart-canvas" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>






@section Scripts {
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            let ctx2 = document.getElementById("line-chart-gradient").getContext("2d");
            let ctx3 = document.getElementById('bar-chart').getContext("2d");
            let gradientStroke1 = ctx2.createLinearGradient(0, 230, 0, 50);

            gradientStroke1.addColorStop(1, 'rgba(203,12,159,0.2)');
            gradientStroke1.addColorStop(0.2, 'rgba(72,72,176,0.0)');
            gradientStroke1.addColorStop(0, 'rgba(203,12,159,0)'); //purple colors

            let gradientStroke2 = ctx2.createLinearGradient(0, 230, 0, 50);

            gradientStroke2.addColorStop(1, 'rgba(20,23,39,0.2)');
            gradientStroke2.addColorStop(0.2, 'rgba(72,72,176,0.0)');
            gradientStroke2.addColorStop(0, 'rgba(20,23,39,0)'); //purple colors

            new Chart(ctx2, {
                type: "line",
                data: {
                    labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                    datasets: [{
                        label: "Mobile apps",
                        tension: 0.4,
                        borderWidth: 0,
                        pointRadius: 0,
                        borderColor: "#cb0c9f",
                        borderWidth: 3,
                        backgroundColor: gradientStroke1,
                        fill: true,
                        data: [50, 40, 300, 220, 500, 250, 400, 230, 500],
                        maxBarThickness: 6

                    },
                        {
                            label: "Websites",
                            tension: 0.4,
                            borderWidth: 0,
                            pointRadius: 0,
                            borderColor: "#3A416F",
                            borderWidth: 3,
                            backgroundColor: gradientStroke2,
                            fill: true,
                            data: [30, 90, 40, 140, 290, 290, 340, 230, 400],
                            maxBarThickness: 6
                        },
                    ],
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index',
                    },
                    scales: {
                        y: {
                            grid: {
                                drawBorder: false,
                                display: true,
                                drawOnChartArea: true,
                                drawTicks: false,
                                borderDash: [5, 5]
                            },
                            ticks: {
                                display: true,
                                padding: 10,
                                color: '#b2b9bf',
                                font: {
                                    size: 11,
                                    family: "Inter",
                                    style: 'normal',
                                    lineHeight: 2
                                },
                            }
                        },
                        x: {
                            grid: {
                                drawBorder: false,
                                display: false,
                                drawOnChartArea: false,
                                drawTicks: false,
                                borderDash: [5, 5]
                            },
                            ticks: {
                                display: true,
                                color: '#b2b9bf',
                                padding: 10,
                                font: {
                                    size: 11,
                                    family: "Inter",
                                    style: 'normal',
                                    lineHeight: 2
                                },
                            }
                        },
                    },
                },
            });

    
            new Chart(ctx3, {
                type: "bar",
                data: {
                    labels: ['Users', 'Events', 'Products'],
                    datasets: [
                        {
                            data: [@Model.UserCount, @Model.EventCount, @Model.ProductCount],
                            borderColor: ['#fd2345', 'rgba(50,205,50,1)', 'rgba(50,50,250,1)'],
                            backgroundColor: ['rgba(75,0,130,0.8)', 'rgba(102,192,55,0.8)', 'rgba(50,50,250,0.8)']
                        }
                    ],
                },
                options: {
                    plugins: {
                        legend: {
                            display: true
                        }
                    },
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
        
</script>
}